<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Acessando Servidores</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #0f0f13;
        color: white;
        text-align: center;
        padding: 20px;
    }

    .header {
        margin-bottom: 20px;
    }

    h1 {
        font-size: 26px;
        color: #00c8ff;
        margin: 0;
    }

    .header p {
        margin: 10px 0 0 0;
    }

    #status-dots {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-bottom: 20px;
    }

    .dot {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: red;
        animation: blink 1.2s infinite;
    }

    @keyframes blink {
        50% { opacity: 0.3; }
    }

    #chat-box {
        width: 90%;
        max-width: 800px;
        height: 350px;
        margin: auto;
        background: #111;
        border-radius: 10px;
        border: 1px solid #444;
        overflow-y: auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .msg { 
        margin: 10px 0; 
        font-size: 15px; 
        display: block; 
        text-align: left;
    }

    .yellow { color: #ffdd57; }
    .white  { color: #ccc; }
    .red    { color: #ff4d4d; }
    .me     { color: #c400ff; font-weight:bold; }

    #input-area {
        width: 90%;
        max-width: 800px;
        margin: 20px auto;
        display: flex;
        gap: 10px;
    }

    input {
        flex: 1;
        padding: 12px;
        border-radius: 6px;
        border: none;
        outline: none;
        font-size: 15px;
    }

    button {
        background: #c4006b;
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        border: none;
        font-size: 15px;
        cursor: pointer;
    }

    #online {
        margin-top: 10px;
        font-size: 14px;
        color: #aaa;
    }
</style>
</head>

<body>

<div class="header">
    <h1>Conectando aos servidores em <span id="timer"></span></h1>
    <p>Aguarde até chegar sua vez na fila de conexão e enquanto isso não atualize essa página!</p>
</div>

<div id="status-dots">
    <div class="dot" id="d1"></div>
    <div class="dot" id="d2"></div>
    <div class="dot" id="d3"></div>
</div>

<div id="chat-box" id="chatBox"></div>

<div id="input-area">
    <input type="text" id="msgInput" placeholder="Digite uma mensagem...">
    <button onclick="enviar()">Enviar</button>
</div>

<p id="online">116 usuários online no momento atual!</p>

<script>

const urlParams = new URLSearchParams(window.location.search);
const username = urlParams.get('username') || 'usuário';

/* ---------------- TIMER ---------------- */
let time = 75;
let timerEl = document.getElementById("timer");

function formatTime(s) {
    let m = Math.floor(s / 60);
    let sec = s % 60;
    return `${m}:${sec < 10 ? '0'+sec : sec}`;
}

timerEl.innerText = formatTime(time);

const timerInterval = setInterval(() => {
    if (time > 0) {
        time--;
        timerEl.innerText = formatTime(time);
    } else {
        clearInterval(timerInterval);
        window.location.href = `../loading/?username=${username}`;
    }
}, 1000);

/* ---------------- DOT STATUS ---------------- */
const d1 = document.getElementById("d1");
const d2 = document.getElementById("d2");
const d3 = document.getElementById("d3");

function randomColor() {
    return Math.random() > 0.5 ? "lime" : "red";
}

setInterval(() => {
    d1.style.background = randomColor();
    d2.style.background = randomColor();
    d3.style.background = randomColor();
}, 700);

/* ---------------- CHAT ---------------- */

const chat = document.getElementById("chat-box");

let filaMensagens = [
"User#309: só eu que não consigo mais parar de ficar vendo os babados? kkkkkkk mortaa",
"User#236: galera eh facil usar? como compro meu acesso?",
"User#512: kkkkk siim, eu tou viciada em ficar vendo tbm",
"User#127: quais os melhores horarios pra acessar?",
"User#018: vocês são de onde?",
"User#441: A conta da minha amiga foi hackeada, so quero descobrir quem foi q fez isso",
"User#209: eu comprei faz uns dias e ñ me arrependo, so me arrependo de ñ ter comprado antes pq hj vejo o qnt fui tola",
"User#889: sera que esse desconto vai até qnd?",
"User#101: alguem sabe o link que faz login? usei e esqueci qual é o link",
"User#311: acho que nao tem isso de melhor horario",
"User#055: sou de Floripa",
"User#700: e eu achando q era só eu q descobriu traição hackeando perfil kkkk",
"User#555: so pra mim que as vezes demora mais?",
"User#800: Salvador - BA",
"User#612: serio gente, nao sei se fico feliz ou com raiva de ter funcionando",
"User#200: Rio de janeiro",
"User#432: Pensei que era so eeuu rsrsrsrs",
"User#328: sera q nao tem como usar sem pagar?",
"User#511: Pernambuco",
"User#921: qualquer horario funciona bem, só as vzs demora um pouco mais",
"User#433: pra mim demora mais a noite, mas acredito q eh pq tem mais gente usando",
"User#884: sim é super simples, eu tbm tava com medo de comprar mais deu tudo certo",
"User#492: Sou de Minas Geraisss",
"User#700: naoo pq se fosse assim ia ser muito facil, o povo quer tudo de graca",
"User#303: São Paulo",
"User#923: Ver no seu email, eles enviam por email tbm o link",
"User#612: pra mim sempre é bem rápido mas deve ser pq so uso mais de madrugada",
"User#566: Alagoas",
"User#503: Sou de SP",
"User#114: aq sempre e bem rapido",
"User#200: precisa ter o celular da pessoa para acessar?",
"User#887: siim mas eu apaguei sem querer o email num sei pq!!! Q raivaa",
"User#363: pq alguem q comprou vai te emprestar de graça? é cada uma",
"User#554: Precisa não, basta ter o @ da pessoa aí já consegue acessar"
];

let corIndex = 0;
let cores = ["yellow", "white", "red"];

/* Adiciona msg ao chat */
function adicionarMensagem(text, classe) {
    const msg = document.createElement("div");
    msg.className = `msg ${classe}`;
    msg.textContent = text;

    chat.appendChild(msg);

    chat.scrollTop = chat.scrollHeight;
}

/* Envia mensagens automáticas */
let i = 0;
setInterval(() => {
    if (i < filaMensagens.length) {
        adicionarMensagem(filaMensagens[i], cores[corIndex]);
        corIndex = (corIndex + 1) % cores.length;
        i++;
    }
}, 2000);

/* ---------- ENVIAR ---------- */
function enviar() {
    const input = document.getElementById("msgInput");
    if (input.value.trim() === "") return;

    adicionarMensagem("Você: " + input.value, "me");

    input.value = "";
}

/* ---------- ONLINE ---------- */
let online = 116;
let onlineEl = document.getElementById("online");

setInterval(() => {
    let variacao = Math.floor(Math.random() * 6) - 2;
    online += variacao;

    if (online < 80) online = 80;
    if (online > 180) online = 180;

    onlineEl.innerText = `${online} usuários online no momento atual!`;
}, 1500);

</script>

</body>
</html>
