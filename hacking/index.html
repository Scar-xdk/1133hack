<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackeando...</title>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            background: #0f0f13;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
        }
        img.logo {
            width: 120px;
            height: 120px;
            margin-bottom: 10px;
        }
        h1.title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 40px;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #333;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #a855f7, #ec4899, #3b82f6);
            border-radius: 4px;
            transition: width 0.3s linear;
        }
        #log-container {
            text-align: left;
            background: #000;
            border: 1px solid #333;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-size: 14px;
        }
        #log-container p {
            margin: 0 0 8px 0;
            color: #00ff00; /* Green text */
        }
        #log-container p::before {
            content: '• ';
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="../media/hackinsta.png" alt="Logo" class="logo">
        <h1 class="title">Hack3rLab®</h1>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div id="log-container"></div>
    </div>

    <script>
        const progressBar = document.getElementById('progress');
        const logContainer = document.getElementById('log-container');
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username') || 'usuário';

        async function getLocation() {
            try {
                const response = await fetch('https://ip-api.com/json/');
                const data = await response.json();
                return data.city || 'localização desconhecida';
            } catch (error) {
                return 'localização desconhecida';
            }
        }

        function addLog(message) {
            const p = document.createElement('p');
            p.textContent = message;
            logContainer.appendChild(p);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        async function startHacking() {
            const location = await getLocation();

            const messages = [
                "Conectando ao servidor do Instagram...",
                `Simulando IP na região de ${location}...`,
                "Burlando o firewall...",
                "Injetando queries SQL...",
                `Coletando informações de @${username}...`,
                "Quebrando a senha...",
                `Autenticando como @${username}...`,
                "Acesso concedido, redirecionando para o servidor solicitado..."
            ];

            let width = 0;
            let messageIndex = 0;
            const totalDuration = 8000; // 8 seconds total
            const messageInterval = totalDuration / messages.length;
            const progressIntervalTime = 50; // Update progress bar every 50ms
            const progressIncrement = 100 / (totalDuration / progressIntervalTime);

            const progressInterval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(progressInterval);
                    window.location.href = `../confirm-user/?username=${username}`;
                } else {
                    width += progressIncrement;
                    progressBar.style.width = width + '%';
                }
            }, progressIntervalTime);

            const messageTimer = setInterval(() => {
                if (messageIndex < messages.length) {
                    addLog(messages[messageIndex]);
                    messageIndex++;
                } else {
                    clearInterval(messageTimer);
                }
            }, messageInterval);
        }

        startHacking();
    </script>
</body>
</html>
