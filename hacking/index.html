<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackeando...</title>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            background: #0f0f13;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
        }
        img.logo {
            width: 120px;
            height: 120px;
            margin-bottom: 10px;
        }
        h1.title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 40px;
        }
        .progress-container {
            position: relative;
            width: 100%;
            margin-bottom: 20px;
        }
        .progress-bar {
            width: 100%;
            height: 20px; /* Aumentar altura */
            background-color: #333;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #a855f7, #ec4899, #3b82f6);
            border-radius: 10px;
            transition: width 0.5s linear; /* Transição mais suave */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 14px;
        }
        #log-container {
            text-align: left;
            background: #000;
            border: 1px solid #333;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-size: 14px;
        }
        #log-container p {
            margin: 0 0 8px 0;
        }
        #log-container p::before {
            content: '• ';
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="../media/hackinsta.png" alt="Logo" class="logo">
        <h1 class="title">Hack3rLab®</h1>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div id="progress-text">0%</div>
        </div>
        <div id="log-container"></div>
    </div>

    <script>
        const progressBar = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const logContainer = document.getElementById('log-container');
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username') || 'usuário';

        async function getLocation() {
            try {
                const response = await fetch("https://ipinfo.io/json");
                const data = await response.json();
                return data.city || data.region || 'localização desconhecida';
            } catch (error) {
                console.log(error);
                return 'localização desconhecida';
            }
        }

        function addLog(message, type = 'success') {
            const p = document.createElement('p');
            p.textContent = message;
            if (type === 'error') {
                p.style.color = '#ff4d4d';
            } else {
                p.style.color = '#00ff00';
            }
            logContainer.appendChild(p);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        async function startHacking() {
            const location = await getLocation();

            const messages = [
                { text: "Conectando ao servidor do Instagram...", type: 'success' },
                { text: `Simulando IP na região de ${location}...`, type: 'success' },
                { text: "Burlando o firewall...", type: 'success' },
                { text: "Falha na conexão inicial, tentando rota alternativa...", type: 'error' },
                { text: "Injetando queries SQL...", type: 'success' },
                { text: "Erro: Acesso negado. Tentando outra vulnerabilidade...", type: 'error' },
                { text: `Coletando informações de @${username}...`, type: 'success' },
                { text: "Quebrando a senha...", type: 'success' },
                { text: `Autenticando como @${username}...`, type: 'success' },
                { text: "Acesso concedido, redirecionando para o servidor solicitado...", type: 'success' }
            ];

            let width = 0;
            let messageIndex = 0;
            const totalDuration = 15000; // Duração de 15 segundos
            const messageInterval = totalDuration / messages.length;
            const progressIntervalTime = 100; 
            const progressIncrement = 100 / (totalDuration / progressIntervalTime);

            const progressInterval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(progressInterval);
                    progressBar.style.width = '100%';
                    progressText.textContent = '100%';
                    window.location.href = `../confirm-user/?username=${username}`;
                } else {
                    width += progressIncrement;
                    progressBar.style.width = width + '%';
                    progressText.textContent = `${Math.round(width)}%`;
                }
            }, progressIntervalTime);

            const messageTimer = setInterval(() => {
                if (messageIndex < messages.length) {
                    addLog(messages[messageIndex].text, messages[messageIndex].type);
                    messageIndex++;
                } else {
                    clearInterval(messageTimer);
                }
            }, messageInterval);
        }

        startHacking();
    </script>
</body>
</html>